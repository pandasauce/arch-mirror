[ABS]
SLIP_RATIO_LIMIT=0.10
CURVE=
PRESENT=1
ACTIVE=1
RATE_HZ=333
;This is deprecated for now, but you should use 333 for backwards compatibility once we update it to be functional again.

[ABS_EXT]
ENABLE=1
DEBUG=0
;NOTE: DO NOT ENABLE FOR RELEASES. 
;Logs many channels at max log rate in CSP Logger for debugging purposes. 
;Useful to see what your controllers are doing.
USE_WHEEL_SPEED_SLIP=0
;Not implemented yet. 1 to use ECU wheel speeds for slip ratio calculation, default 0 (true SR)
RESPONSE_TIME=0.03
;Seconds, 95% response time of first order function.
;Very important parameter for control of system overall. 
;Do not cheat this by making it too low unless you want unrealistic ABS.
INTEGRAL_ERROR_LIM=-0.01,10000
;This clamps the integral controller's integral calculation. 
;Without it, you can run into undershoot situations. 
;You can monitor the integral calculation in the debug channels in CSP Logger.

[ABS_TARGET_CONTROLLER_0] ;TARGET
LUT=(0=0.00|5=0.15|20=0.60|40=0.95|100=1.00)
INPUT=SPEED
COMBINATOR=MULT

[ABS_TARGET_CONTROLLER_1] ;TARGET REAR
LUT=(0=1.00|40=1.00|100=0.80)
INPUT=SPEED
COMBINATOR=MULT
ENABLED_WHEELS=0,0,1,1

[ABS_TARGET_CONTROLLER_2]
LUT=(-1.20=0.50|0.00=1.00|1.20=0.50)
INPUT=LATG
COMBINATOR=MULT

[ABS_GAIN_CONTROLLER_0] ;CONSTANT
LUT=(0.00=0.00|0.10=1.00)
INPUT=ABS_SLIP_DIFF_TARGET
COMBINATOR=ADD

[ABS_GAIN_CONTROLLER_1]
LUT=(0=0.00|5=0.05|300=1.00)
INPUT=SPEEDKMH
COMBINATOR=MULT

[ABS_GAIN_CONTROLLER_2]
LUT=(0=0|0.01=0|0.015=1)
INPUT=BRAKE
COMBINATOR=MULT

[ABS_INTEGRAL_GAIN_CONTROLLER_0] ;INTEGRAL
LUT=(0=30|300=50)
INPUT=SPEED
COMBINATOR=ADD

[ABS_INTEGRAL_GAIN_CONTROLLER_1]
LUT=(0=0|0.01=0|0.015=1)
INPUT=BRAKE
COMBINATOR=MULT

[ABS_DERIVATIVE_GAIN_CONTROLLER_0] ;DERIVATIVE
LUT=(0=0.020|300=0.005)
INPUT=SPEED
COMBINATOR=ADD

[ABS_DERIVATIVE_GAIN_CONTROLLER_1]
LUT=(0=0|0.01=0|0.015=1)
INPUT=BRAKE
COMBINATOR=MULT

[TRACTION_CONTROL]
SLIP_RATIO_LIMIT=0.08
CURVE=
PRESENT=1
ACTIVE=1
RATE_HZ=100
MIN_SPEED_KMH=20

[TRACTION_CONTROL_2]
ACTIVE=1
USE_WHEEL_SPEED_SLIP=1
;USE_WHEEL_SPEED_SLIP: 0 use magical slipratio input, 1 solve from wheelspeeds
;MODIFY_SLIP_INPUT: 0 controller modifies % cut, 1 controller modifies goal slip value
;INPUT: SPEED, GAS, GEAR, LATG, LONG, STEER, ENGINE_ACCEL, YAW_RATE,  SLIP_DIFF_RATIO (currentSlip/goalSlip)
;COMBINATOR: ADD, MULT, SCALE
;One dimensional LUT math operations are completed before two dimensional operations

[TC_CONTROLLER_0]
MODIFY_SLIP_INPUT=0
2DLUT=electronics_tc2_0_slipdiffratio-latg.2dlut
2D_INPUT_X=SLIP_DIFF_RATIO
2D_INPUT_Y=LATG
COMBINATOR_2D=ADD

[TC_CONTROLLER_1]
MODIFY_SLIP_INPUT=1
2DLUT=electronics_tc2_1_gas-latg.2dlut
2D_INPUT_X=GAS
2D_INPUT_Y=LATG
COMBINATOR_2D=MULT