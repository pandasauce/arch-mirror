[HEADER]
VERSION=4

[_EXTENSION]
TORQUE_MODE_EX=2
FIX_PROGRESSIVE_RATE=1
USE_DWB2=0
DAMPER_LUTS=1

;[ODE]                          ;optional - tuning these parameters can help with stability. See Open Dynamics Engine Manual (http://ode.org/wiki/index.php/Manual#Joint_error_and_the_Error_Reduction_Parameter_.28ERP.29) for more information.
;ERP=0.9                        ;this is the AC default for certain joint types, others (and global value) are 0.3
;CFM=1                          ;*10^-7 - just did this to keep numbers more reasonable

[BASIC]
WHEELBASE=2.475
CG_LOCATION=0.555
;C&D 240SX SE S13 Hatch 52.8% 1269kg with fuel?
;Driver 0.5% rearward

[ARB]
EXTEND=1
FRONT_MOTION_RATIO=1.0
FRONT=21835
REAR_MOTION_RATIO=1.0
REAR=5026
;F ARB diameter = 23.0 - 30.4
;F ARB MR = 0.554^2
;F ARB WIDTH	= 882 / 852
;F ARB LEVER	= 161 / 154
;F ARB DIAGONAL	= 265 (164) / 248 (159)

;R ARB diameter = 16.0 - 27.5
;R ARB MR = 0.425^2
;R ARB WIDTH	= 763 / 834
;R ARB LEVER	= 146 / 155
;R ARB DIAGONAL	= 324 (173) / 268 (182)

[FRONT]
TYPE=COSMIC
BASEY=-0.250
TRACK=1.545
HUB_MASS=49.1
;49.1 Drift
RIM_OFFSET=0.020
;0.030 wheel + 0.010 spacer

;S13 Front Drift Geo

;RCA DELTAS = -0.00925, -0.040, +0.00475

;High
;X = sin31.0 = 0.09825 + (0.51503807 * -0.020) = 0.08794
;Z = sin59.0 = -0.07462 + (0.8571673 * 0.020) = -0.05747
;STEER_JOINT_0_POS_A=0.00000, 0.00000, +0.01250
;STEER_JOINT_0_POS_B=+0.00100, 0.00000, 0.00000

;Low
;X = sin31.0 = 0.09825 + (0.51503807 * -0.022) = 0.08691
;Z = sin59.0 = -0.07462 + (0.8571673 * 0.022) = -0.05576
;STEER_JOINT_0_POS_A=0.00000, 0.00000, +0.02500
;STEER_JOINT_0_POS_B=+0.00100, 0.00000, 0.00000

DJ0=F_S13_LCA_FRONT
DJ0_BODY_A=CHASSIS
DJ0_BODY_B=HUB_L
DJ0_POS_A=0.38250, -0.08000, 0.25125
DJ0_POS_B=0.08450, -0.12000, 0.01225

DJ1=F_S13_LCA_REAR
DJ1_BODY_A=CHASSIS
DJ1_BODY_B=HUB_L
DJ1_POS_A=0.40625, -0.07000, 0.02250
DJ1_POS_B=0.08450, -0.12000, 0.01225
DJ1_KP=0

STEER_JOINT_0=F_S13_TOE
STEER_JOINT_0_BODY_A=F_S13_RACK_BODY
STEER_JOINT_0_BODY_B=HUB_L
STEER_JOINT_0_POS_A=0.41250, -0.07500, -0.05000 ;High
;STEER_JOINT_0_POS_A_1=0.41250, -0.07500, -0.03750 ;Low

STEER_JOINT_0_POS_B=0.08894, -0.12250, -0.05747 ;High
;STEER_JOINT_0_POS_B_1=0.08791, -0.12250, -0.05576 ;Low

DJ2=F_S13_STRUT_TOP
DJ2_BODY_A=CHASSIS
DJ2_BODY_B=F_S13_STRUT_BODY
DJ2_POS_A=0.25890, 1.46150, -0.24710
DJ2_POS_B=0.22312, 0.48000, -0.05900

DJ3=F_S13_STRUT_CAMBER
DJ3_BODY_A=CHASSIS
DJ3_BODY_B=F_S13_STRUT_BODY
DJ3_POS_A=1.22250, 0.44360, -0.05900
DJ3_POS_B=0.22312, 0.48000, -0.05900

DJ4=F_S13_STRUT_CASTER
DJ4_BODY_A=CHASSIS
DJ4_BODY_B=F_S13_STRUT_BODY
DJ4_POS_A=0.22310, 0.66820, 0.92310
DJ4_POS_B=0.22312, 0.48000, -0.05900
DJ4_KP=1

;S13 Front Sim Stuff

BODY_0_NAME=F_S13_STRUT_BODY
BODY_0_MASS=1
BODY_0_INERTIA=0.1, 0.1, 0.1
BODY_0_POS=0.22312, 0.48000, -0.05900
BODY_0_MIRROR=1

SLIDER_0=F_S13_STRUT_SLIDER
SLIDER_0_BODY_A=F_S13_STRUT_BODY
SLIDER_0_BODY_B=HUB_L
SLIDER_0_POS_A=0.22312, 0.48000, -0.05900
SLIDER_0_POS_B=0.21000, 0.12000, 0.01000
SLIDER_0_PARITY=-1

BODY_1_NAME=F_S13_RACK_BODY
BODY_1_MASS=1
BODY_1_INERTIA=0.1, 0.1, 0.1
BODY_1_POS=0.41250, -0.07500, -0.05000
BODY_1_MIRROR=0

SLIDER_1=F_S13_RACK_SLIDER
SLIDER_1_BODY_A=CHASSIS
SLIDER_1_BODY_B=F_S13_RACK_BODY
SLIDER_1_POS_A=0.51250, -0.07500, -0.05000
SLIDER_1_POS_B=0.41250, -0.07500, -0.05000
SLIDER_1_PARITY=0

TOE_OUT=0.00000 ;-0.05
STATIC_CAMBER=-1.31 ;-3.80
DJ3_LENGTH_OFFSET=-0.02001 ;Strut Camber
DJ1_LENGTH_OFFSET=0.00000 ;LCA R Camber
STEER_JOINT_0_LENGTH_OFFSET=0.00051 ;Steer Toe
DJ4_LENGTH_OFFSET=0.00501 ;Strut Caster
DJ0_LENGTH_OFFSET=-0.00000 ;LCA F Caster
;30L, Driver, Drift

[FRONT_COILOVER_0] ;CORNER SPRING + DAMPER
ELECT_LOG=CORNER
PULL_FORCE=0
PRELOAD_FORCE=3405
PRELOAD=-0.037
;(Drift -0.040 @ wheel, -0.037 @ damper)

BODY_A=F_S13_STRUT_BODY
BODY_B=HUB_L
POS_A=0.22312, 0.4800, -0.0590
POS_B=0.21000, 0.1200, 0.0100

MIN_LENGTH=0.25178
MAX_LENGTH=0.36478
BUMPSTOP_GAP=0.075

;DAMPER_TRAVEL = 0.078, 0.035
;PACKER_HEIGHT = 0.040
;BUMPSTOP_GAP = 0.038 + 0.037 = 0.075 
;DAMPER_LENGTH = 0.36678 - 0.037 = 0.32978

;Tuned 78/35 -40

INSTALL_RATE=16670000
RATE=78480

[FRONT_SPRING_0] ;F_S13_RACK SPRING
BODY_A=CHASSIS
BODY_B=F_S13_RACK_BODY
POS_A=0.51250, -0.07500, -0.05000
POS_B=0.41250, -0.07500, -0.05000

RATE=1900000
PULL_FORCE=1
PARITY=0

[FRONT_DAMPER_0] ;F_S13_RACK DAMPER
BODY_A=CHASSIS
BODY_B=F_S13_RACK_BODY
POS_A=0.51250, -0.07500, -0.05000
POS_B=0.41250, -0.07500, -0.05000

DAMP_BUMP=100000
DAMP_FAST_BUMP=100000
DAMP_FAST_BUMPTHRESHOLD=1
DAMP_REBOUND=100000
DAMP_FAST_REBOUND=100000
DAMP_FAST_REBOUNDTHRESHOLD=1
PARITY=0

[REAR]
TYPE=COSMIC
BASEY=-0.250
TRACK=1.540
HUB_MASS=48.1
;48.1 Drift
RIM_OFFSET=0.030

;S13 Rear Geo

DJ0=R_S13_UCA_FRONT
DJ0_BODY_A=R_S13_SUBFRAME
DJ0_BODY_B=HUB_L
DJ0_POS_A=0.29441, 0.09222, 0.16337
DJ0_POS_B=0.10761, 0.10573, 0.03782

DJ1=R_S13_UCA_REAR
DJ1_BODY_A=R_S13_SUBFRAME
DJ1_BODY_B=HUB_L
DJ1_POS_A=0.40557, 0.09416, -0.09057
DJ1_POS_B=0.10438, 0.12416, -0.05501
DJ1_KP=1

DJ2=R_S13_LCA_FRONT
DJ2_BODY_A=R_S13_SUBFRAME
DJ2_BODY_B=HUB_L
DJ2_POS_A=0.27206, -0.01883, 0.30121
DJ2_POS_A_1=0.27206, -0.03383, 0.30121
DJ2_POS_A_2=0.27206, -0.04883, 0.30121
DJ2_POS_A_3=0.27206, -0.06383, 0.30121

DJ2_POS_B=0.11013, -0.11266, 0.00000

DJ3=R_S13_LCA_REAR
DJ3_BODY_A=R_S13_SUBFRAME
DJ3_BODY_B=HUB_L
DJ3_POS_A=0.41707, -0.10231, 0.02980
DJ3_POS_B=0.11013, -0.11266, 0.00000
DJ3_KP=0

STEER_JOINT_0=R_S13_TOE
STEER_JOINT_0_BODY_A=R_S13_SUBFRAME
STEER_JOINT_0_BODY_B=HUB_L
STEER_JOINT_0_POS_A=0.55043, -0.03320, -0.13328
STEER_JOINT_0_POS_B=0.19635, -0.02644, -0.17075

;S13 Rear Adjusters

DJ4=R_S13_SUBFRAME_FRONT_ADJUSTER_LATERAL
DJ4_BODY_A=CHASSIS
DJ4_BODY_B=R_S13_SUBFRAME
DJ4_POS_A=0.27000, -0.05000, 0.44000
DJ4_POS_B=0.17000, -0.05000, 0.44000

DJ5=R_S13_SUBFRAME_FRONT_ADJUSTER_VERTICAL
DJ5_BODY_A=CHASSIS
DJ5_BODY_B=R_S13_SUBFRAME
DJ5_POS_A=0.17000, 0.05000, 0.44000
DJ5_POS_B=0.17000, -0.05000, 0.44000

DJ6=R_S13_SUBFRAME_FRONT_ADJUSTER_LONGITUDINAL
DJ6_BODY_A=CHASSIS
DJ6_BODY_B=R_S13_SUBFRAME
DJ6_POS_A=0.17000, -0.05000, 0.54000
DJ6_POS_B=0.17000, -0.05000, 0.44000

DJ7=R_S13_SUBFRAME_REAR_ADJUSTER_LATERAL
DJ7_BODY_A=CHASSIS
DJ7_BODY_B=R_S13_SUBFRAME
DJ7_POS_A=0.54000, 0.10000, -0.20000
DJ7_POS_B=0.44000, 0.10000, -0.20000

DJ8=R_S13_SUBFRAME_REAR_ADJUSTER_VERTICAL
DJ8_BODY_A=CHASSIS
DJ8_BODY_B=R_S13_SUBFRAME
DJ8_POS_A=0.44000, 0.20000, -0.20000
DJ8_POS_B=0.44000, 0.10000, -0.20000

DJ9=R_S13_SUBFRAME_REAR_ADJUSTER_LONGITUDINAL
DJ9_BODY_A=CHASSIS
DJ9_BODY_B=R_S13_SUBFRAME
DJ9_POS_A=0.44000, 0.10000, -0.30000
DJ9_POS_B=0.44000, 0.10000, -0.20000

;S13 Rear Sim Stuff

BODY_0_NAME=R_S13_SUBFRAME
BODY_0_MASS=30
BODY_0_INERTIA=0.1, 0.1, 0.1
BODY_0_POS=0.77000, 0.02500, 0.12000
BODY_0_MIRROR=0

TOE_OUT=0.00000 ;+0.10
STATIC_CAMBER=-1.11 ;-0.30
DJ1_LENGTH_OFFSET=-0.00701 ;UCA R Camber
DJ2_LENGTH_OFFSET=-0.01501 ;LCA F Camber
DJ3_LENGTH_OFFSET=-0.01501 ;LCA R Camber
STEER_JOINT_0_LENGTH_OFFSET=-0.01191 ;Steer Toe
DJ0_LENGTH_OFFSET=-0.00701 ;UCA F Bumpsteer
DJ5_LENGTH_OFFSET=0.00000 ;Spacer F
DJ8_LENGTH_OFFSET=0.00000 ;Spacer R
;30L, Driver, Drift

[REAR_COILOVER_0] ;CORNER SPRING + DAMPER
ELECT_LOG=CORNER
PULL_FORCE=0
PRELOAD_FORCE=2355
PRELOAD=-0.031
;(Drift -0.030 @ wheel, -0.031 @ damper)

BODY_A=CHASSIS
BODY_B=HUB_L
POS_A=0.29061, 0.38921, -0.02788
POS_B=0.16301, -0.05748, -0.10108

MIN_LENGTH=0.35329
MAX_LENGTH=0.51829
BUMPSTOP_GAP=0.095

;DAMPER_TRAVEL = 0.084, 0.081
;PACKER_HEIGHT = 0.020
;BUMPSTOP_GAP = 0.064 + 0.031 = 0.095
;DAMPER_LENGTH = 0.47029 - 0.031 = 0.43729

;Tuned 84/81 -30

INSTALL_RATE=16670000
RATE=58860

[GRAPHICS_OFFSETS]
WHEEL_LF=0.000
SUSP_LF=0.000
WHEEL_RF=-0.000
SUSP_RF=-0.000
WHEEL_LR=0.000
SUSP_LR=0.000
WHEEL_RR=-0.000
SUSP_RR=-0.000

[DAMAGE]
MIN_VELOCITY=40
GAIN=0.0004
MAX_DAMAGE=0.05
DEBUG_LOG=1