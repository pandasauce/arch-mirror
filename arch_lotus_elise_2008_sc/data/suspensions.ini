[HEADER]
VERSION=4

[_EXTENSION]
TORQUE_MODE_EX=2
FIX_PROGRESSIVE_RATE=1
USE_DWB2=0
DAMPER_LUTS=1

;[ODE]                          ;optional - tuning these parameters can help with stability. See Open Dynamics Engine Manual (http://ode.org/wiki/index.php/Manual#Joint_error_and_the_Error_Reduction_Parameter_.28ERP.29) for more information.
;ERP=0.9                        ;this is the AC default for certain joint types, others (and global value) are 0.3
;CFM=1                          ;*10^-7 - just did this to keep numbers more reasonable

[BASIC]
WHEELBASE=2.300
CG_LOCATION=0.370
;Elise SC 0.380

[ARB]
FRONT=5881
REAR=0
;F ARB diameter = 19.0 OD 14.8 ID
;F ARB MR = 0.700^2 S2
;F ARB WIDTH	= 793
;F ARB LEVER	= 234
;F ARB DIAGONAL	= 251

;R ARB diameter = 
;R ARB MR = 
;R ARB WIDTH	= 
;R ARB LEVER	= 
;R ARB DIAGONAL	= 

[FRONT]
TYPE=COSMIC
BASEY=-0.240
;470mm @ 130mm
TRACK=1.519
;1.457 0.031
HUB_MASS=30.0
RIM_OFFSET=0.031

;Elise S2 Front Geo

DJ0=F_ELISE_UCA_FRONT
DJ0_BODY_A=F_ELISE_UCA_CASTER_BODY
DJ0_BODY_B=F_ELISE_UBJ_CAMBER_BODY
DJ0_POS_A=0.36800, 0.07850, 0.17000
DJ0_POS_B=0.11350, 0.12800, -0.00270

DJ1=F_ELISE_UCA_REAR
DJ1_BODY_A=F_ELISE_UCA_CASTER_BODY
DJ1_BODY_B=F_ELISE_UBJ_CAMBER_BODY
DJ1_POS_A=0.36800, 0.07850, -0.03000
DJ1_POS_B=0.11350, 0.12800, -0.00270
DJ1_KP=1

J0=F_ELISE_LCA_FRONT
J0_BODY_A=CHASSIS
J0_BODY_B=F_ELISE_LCA_BODY
J0_POS=0.46800, -0.13500, 0.17000

J1=F_ELISE_LCA_REAR
J1_BODY_A=CHASSIS
J1_BODY_B=F_ELISE_LCA_BODY
J1_POS=0.46800, -0.13500, -0.16000

J2=F_ELISE_LCA_BJ
J2_BODY_A=F_ELISE_LCA_BODY
J2_BODY_B=HUB_L
J2_POS=0.06300, -0.11000, 0.01500
J2_KP=0

STEER_JOINT_0=F_ELISE_TOE
STEER_JOINT_0_BODY_A=CHASSIS
STEER_JOINT_0_BODY_B=F_ELISE_UBJ_CAMBER_BODY
STEER_JOINT_0_POS_A=0.41300, 0.05400, -0.10000 ;Base
;STEER_JOINT_0_POS_A=0.41300, 0.06200, -0.10000 ;Sport
STEER_JOINT_0_POS_B=0.16500, 0.11000, -0.12000

;Elise Front Adjusters

BODY_0_NAME=F_ELISE_UBJ_CAMBER_BODY
BODY_0_MASS=1
BODY_0_INERTIA=0.1, 0.1, 0.1
BODY_0_POS=0.11350, 0.12800, -0.00270
BODY_0_MIRROR=1

SLIDER_0=F_ELISE_UBJ_CAMBER_SLIDER
SLIDER_0_BODY_A=F_ELISE_UBJ_CAMBER_BODY
SLIDER_0_BODY_B=HUB_L
SLIDER_0_POS_A=0.01350, 0.12800, -0.00270
SLIDER_0_POS_B=0.11350, 0.12800, -0.00270
SLIDER_0_PARITY=-1

DJ2=F_ELISE_UBJ_CAMBER_ADJUSTER
DJ2_BODY_A=F_ELISE_UBJ_CAMBER_BODY
DJ2_BODY_B=HUB_L
DJ2_POS_A=0.01350, 0.12800, -0.00270
DJ2_POS_B=0.11350, 0.12800, -0.00270

BODY_1_NAME=F_ELISE_UCA_CASTER_BODY
BODY_1_MASS=1
BODY_1_INERTIA=0.1, 0.1, 0.1
BODY_1_POS=0.36800, 0.09350, 0.17000
BODY_1_MIRROR=1

SLIDER_1=F_ELISE_UCA_CASTER_SLIDER
SLIDER_1_BODY_A=CHASSIS
SLIDER_1_BODY_B=F_ELISE_UCA_CASTER_BODY
SLIDER_1_POS_A=0.36800, 0.09350, 0.17000
SLIDER_1_POS_B=0.36800, 0.09350, 0.07000
SLIDER_1_PARITY=-1

DJ3=F_ELISE_UCA_CASTER_ADJUSTER
DJ3_BODY_A=CHASSIS
DJ3_BODY_B=F_ELISE_UCA_CASTER_BODY
DJ3_POS_A=0.36800, 0.09350, 0.17000
DJ3_POS_B=0.36800, 0.09350, 0.07000

;Elise Front Sim Stuff

BODY_2_NAME=F_ELISE_LCA_BODY
BODY_2_MASS=1
BODY_2_INERTIA=0.1, 0.1, 0.1
BODY_2_POS=0.26550, -0.12250, 0.01000
BODY_2_MIRROR=1

TOE_OUT=0.00001 ;-0.015
STATIC_CAMBER=0.51 ;-0.10
DJ2_LENGTH_OFFSET=-0.00101 ;UBJ Camber
STEER_JOINT_0_LENGTH_OFFSET=0.00061 ;Steer Toe
DJ3_LENGTH_OFFSET=-0.00101 ;UCA Caster
;20L, Align
;2x 75kg occupants

[FRONT_COILOVER_0] ;CORNER SPRING + DAMPER
ELECT_LOG=CORNER
PULL_FORCE=0
PRELOAD_FORCE=2175
PRELOAD=-0.015
;(S2 -0.012 @ wheel -0.009 @ damper)
;Driver -0.008 @ wheel -0.006 @ damper
;Align -0.028 @ wheel -0.022 @ damper

BODY_A=CHASSIS
BODY_B=F_ELISE_LCA_BODY
POS_A=0.35000, 0.23000, 0.02000
POS_B=0.13550, -0.11000, 0.02000

MIN_LENGTH=0.35101
MAX_LENGTH=0.42801
BUMPSTOP_GAP=0.025

;DAMPER_TRAVEL = 0.042, 0.035
;PACKER_HEIGHT = 0.026
;BUMPSTOP_GAP = 0.016 + 0.009 = 0.025
;DAMPER_LENGTH = 0.40201 - 0.009 = 0.39301

INSTALL_RATE=550000
RATE=43000
;27500 N/m 140mm -0mm S1 Early (+0 tire)
;35000 N/m 140mm -0mm S1 Late (+0 tire)
;42500 N/m 130mm -10mm S1 Suspension Enhancement Kit (+0 tire)
;43000 N/m 135mm -12mm S2 (+7 tire)
;47500 N/m 130mm -17mm S2 LSS (+7 tire)
;45000 N/m 130mm -18mm S2 Exige (+8 tire)
;47500 N/m 120mm -28mm S2 Exige Track Pack (+8 tire)
;57000 N/m 120mm -28mm S2 Exige 240R / Lotus Sport Öhlins (+8 tire)
;80000 N/m ???mm -??mm S2 Lotus Sport Öhlins Track A005

[FRONT_SPRING_0] ;BUSHING SPRING
BODY_A=CHASSIS
BODY_B=HUB_L
POS_A=0, 1, 0
POS_B=0, 0, 0

RATE=1200
;Soft rubber = 200 N/m
;Stiff rubber = 500 N/m
;6x 200 N/m bushing = 1200 N/m

[REAR]
TYPE=COSMIC
BASEY=-0.240
;470mm @ 130mm
TRACK=1.583
;1.507 0.038
HUB_MASS=35
RIM_OFFSET=0.038

;Elise Rear Geo

DJ0=R_ELISE_UCA_FRONT
DJ0_BODY_A=CHASSIS_REAR
DJ0_BODY_B=R_ELISE_UBJ_CAMBER_BODY
DJ0_POS_A=0.43600, 0.14000, 0.02500
DJ0_POS_B=0.21100, 0.15000, 0.04000

DJ1=R_ELISE_UCA_REAR
DJ1_BODY_A=CHASSIS_REAR
DJ1_BODY_B=R_ELISE_UBJ_CAMBER_BODY
DJ1_POS_A=0.43600, 0.13500, -0.16000
DJ1_POS_B=0.21100, 0.15000, 0.04000
DJ1_KP=1

J0=R_ELISE_LCA_FRONT
J0_BODY_A=CHASSIS_REAR
J0_BODY_B=R_ELISE_LCA_BODY
J0_POS=0.49600, -0.07500,  0.46000

J1=R_ELISE_LCA_REAR
J1_BODY_A=R_ELISE_LCA_REAR_BUSHING_BODY
J1_BODY_B=R_ELISE_LCA_BODY
J1_POS=0.49600, -0.10500, -0.15000

BODY_0_NAME=R_ELISE_LCA_REAR_BUSHING_BODY
BODY_0_MASS=10
BODY_0_INERTIA=0.1, 0.1, 0.1
BODY_0_POS=0.49600, -0.10500, -0.15000
BODY_0_MIRROR=1

SLIDER_0=R_ELISE_LCA_REAR_BUSHING_SLIDER
SLIDER_0_BODY_A=CHASSIS_REAR
SLIDER_0_BODY_B=R_ELISE_LCA_REAR_BUSHING_BODY
SLIDER_0_POS_A=0.59600, -0.10500, -0.15000
SLIDER_0_POS_B=0.49600, -0.10500, -0.15000
SLIDER_0_PARITY=-1

J2=R_ELISE_LCA_BJ
J2_BODY_A=R_ELISE_LCA_BODY
J2_BODY_B=HUB_L
J2_POS=0.12600, -0.11000, 0.10000
J2_KP=0

STEER_JOINT_0=R_ELISE_TOE
STEER_JOINT_0_BODY_A=CHASSIS_REAR
STEER_JOINT_0_BODY_B=HUB_L
STEER_JOINT_0_POS_A=0.49600, -0.10700, -0.19000
STEER_JOINT_0_POS_B=0.10100, -0.12200, -0.08000

;Elise Rear Adjusters

BODY_1_NAME=R_ELISE_UBJ_CAMBER_BODY
BODY_1_MASS=1
BODY_1_INERTIA=0.1, 0.1, 0.1
BODY_1_POS=0.21100, 0.15000, 0.04000
BODY_1_MIRROR=1

SLIDER_1=R_ELISE_UBJ_CAMBER_SLIDER
SLIDER_1_BODY_A=R_ELISE_UBJ_CAMBER_BODY
SLIDER_1_BODY_B=HUB_L
SLIDER_1_POS_A=0.11100, 0.15000, 0.04000
SLIDER_1_POS_B=0.21100, 0.15000, 0.04000
SLIDER_1_PARITY=-1

DJ2=R_ELISE_UBJ_CAMBER_ADJUSTER
DJ2_BODY_A=R_ELISE_UBJ_CAMBER_BODY
DJ2_BODY_B=HUB_L
DJ2_POS_A=0.11100, 0.15000, 0.04000
DJ2_POS_B=0.21100, 0.15000, 0.04000

;Elise Rear Sim Stuff

BODY_2_NAME=R_ELISE_LCA_BODY
BODY_2_MASS=1
BODY_2_INERTIA=0.1, 0.1, 0.1
BODY_2_POS=0.31100, -0.10000, 0.12750
BODY_2_MIRROR=1

BODY_3_NAME=CHASSIS_REAR
BODY_3_MASS=495.81
;945 - ((30.0 * 2) + (35.0 * 2) + (1 * 8) + (10 * 2))) * (1 - 0.370)
BODY_3_INERTIA=1.470, 0.950, 3.200
BODY_3_CARPOS=0, 0, 0

HJ0=TORSION_HINGE
HJ0_BODY_A=CHASSIS
HJ0_BODY_B=CHASSIS_REAR
HJ0_CARPOS_A=0, 0, 1
HJ0_CARPOS_B=0, 0, -1

ENGINE_TORQUE_BODY=CHASSIS_REAR

TOE_OUT=0.00001 ;0.16
STATIC_CAMBER=-1.41 ;-1.80
DJ2_LENGTH_OFFSET=-0.00101 ;UBJ Camber
STEER_JOINT_0_LENGTH_OFFSET=0.00041 ;Steer Toe
;20L, Align
;2x 75kg occupants

[REAR_COILOVER_0] ;CORNER SPRING + DAMPER
ELECT_LOG=CORNER
PULL_FORCE=0
PRELOAD_FORCE=3490
PRELOAD=-0.018
;(S2 -0.017 @ wheel -0.013 @ damper)
;Driver -0.007 @ wheel -0.005 @ damper
;Align -0.031 @ wheel -0.023 @ damper

BODY_A=CHASSIS_REAR
BODY_B=R_ELISE_LCA_BODY
POS_A=0.31100, 0.25000, 0.10000
POS_B=0.20925, -0.10000, 0.12000

MIN_LENGTH=0.30154
MAX_LENGTH=0.38804
BUMPSTOP_GAP=0.0345

;DAMPER_TRAVEL = 0.0505, 0.036
;PACKER_HEIGHT = 0.028
;BUMPSTOP_GAP = 0.0215 + 0.013 = 0.0345
;DAMPER_LENGTH = 0.36504 - 0.013 = 0.35204

INSTALL_RATE=550000
RATE=60000
;40000 N/m 140mm -0mm S1 Early, S1 Late (+0 tire)
;50000 N/m 130mm -22mm S1 Suspension Enhancement Kit (+12 tire)
;60000 N/m 135mm -17mm S2 (+12 tire)
;65000 N/m 130mm -22mm S2 LSS (+12 tire)
;65000 N/m 130mm -22mm S2 Exige (+12 tire)
;65000 N/m 120mm -32mm S2 Exige Track Pack (+12 tire)
;74000 N/m 120mm -32mm S2 Exige 240R / Lotus Sport Öhlins (+12 tire)
;100000 N/m ???mm -??mm S2 Lotus Sport Öhlins Track A005

[REAR_SPRING_0] ;R_ELISE_LCA_REAR SPRING
BODY_A=CHASSIS_REAR
BODY_B=R_ELISE_LCA_REAR_BUSHING_BODY
POS_A=0.59600, -0.10500, -0.15000
POS_B=0.49600, -0.10500, -0.15000

RATE=2000000
PULL_FORCE=1

[REAR_DAMPER_0] ;R_ELISE_LCA_REAR DAMPER
BODY_A=CHASSIS_REAR
BODY_B=R_ELISE_LCA_REAR_BUSHING_BODY
POS_A=0.59600, -0.10500, -0.15000
POS_B=0.49600, -0.10500, -0.15000

DAMP_BUMP=10000
DAMP_FAST_BUMP=10000
DAMP_FAST_BUMPTHRESHOLD=1
DAMP_REBOUND=10000
DAMP_FAST_REBOUND=10000
DAMP_FAST_REBOUNDTHRESHOLD=1

[REAR_SPRING_1] ;BUSHING SPRING
BODY_A=CHASSIS_REAR
BODY_B=HUB_L
POS_A=0, 1, 0
POS_B=0, 0, 0

RATE=1200
;Soft rubber = 200 N/m
;Stiff rubber = 500 N/m
;6x 200 N/m bushing = 1200 N/m

[REAR_TORSION_0] ;TORSION SPRING
RATE=11000
PRELOAD=0
HINGE=TORSION_HINGE
PARITY=0

[REAR_DAMPER_1] ;TORSION DAMPER
BODY_A=CHASSIS
BODY_B=CHASSIS_REAR
POS_A=0, 1, 0
POS_B=0, 0, 0

DAMP_BUMP=10000
DAMP_FAST_BUMP=10000
DAMP_FAST_BUMPTHRESHOLD=1
DAMP_REBOUND=10000
DAMP_FAST_REBOUND=10000
DAMP_FAST_REBOUNDTHRESHOLD=1
PARITY=0

[GRAPHICS_OFFSETS]
WHEEL_LF=0.000
SUSP_LF=0.000
WHEEL_RF=-0.000
SUSP_RF=-0.000
WHEEL_LR=0.000
SUSP_LR=0.000
WHEEL_RR=-0.000
SUSP_RR=-0.000

[DAMAGE]
MIN_VELOCITY=30
GAIN=0.0003
MAX_DAMAGE=0.05
DEBUG_LOG=1