[HEADER]
VERSION=4

[_EXTENSION]
TORQUE_MODE_EX=2
FIX_PROGRESSIVE_RATE=1
DAMPER_LUTS=1

;[ODE]                          ;optional - tuning these parameters can help with stability. See Open Dynamics Engine Manual (http://ode.org/wiki/index.php/Manual#Joint_error_and_the_Error_Reduction_Parameter_.28ERP.29) for more information.
;ERP=0.9                        ;this is the AC default for certain joint types, others (and global value) are 0.3
;CFM=1                          ;*10^-7 - just did this to keep numbers more reasonable

[BASIC]
WHEELBASE=2.496
CG_LOCATION=0.490
;E89 Z4 35i CG 49.2%

[ARB]
FRONT=50629
REAR=5705
;F ARB diameter = 26.5 OD 19.0 ID Z4
;F ARB MR = 0.960^2
;F ARB WIDTH	= 564
;F ARB LEVER	= 239
;F ARB DIAGONAL	= 316

;R ARB diameter = 19.0 OD Z4
;R ARB MR = 0.445^2
;R ARB WIDTH	= 560
;R ARB LEVER	= 209
;R ARB DIAGONAL	= 267 (247)

[FRONT]
TYPE=COSMIC
BASEY=-0.190
;477mm NHTSA
TRACK=1.569
;1.511 ET29
HUB_MASS=41.5
RIM_OFFSET=0.029

;Z4 Front Geo

DJ0=F_Z4_LCA_FRONT
DJ0_BODY_A=CHASSIS
DJ0_BODY_B=HUB_L
DJ0_POS_A=0.42000, -0.07500, 0.27250
DJ0_POS_B=0.11900, -0.07000, 0.00700

DJ1=F_Z4_LCA_REAR
DJ1_BODY_A=CHASSIS
DJ1_BODY_B=HUB_L
DJ1_POS_A=0.41000, -0.13500, -0.04500
DJ1_POS_B=0.11870, -0.13500, -0.02150

BODY_0_NAME=F_Z4_LBJ_BODY
BODY_0_MASS=1
BODY_0_INERTIA=0.1, 0.1, 0.1
BODY_0_POS=0.08820, -0.10250, -0.00725
BODY_0_MIRROR=1

J0=F_Z4_LBJ
J0_BODY_A=F_Z4_LBJ_BODY
J0_BODY_B=HUB_L
J0_POS=0.08820, -0.10250, -0.00725
J0_KP=0

STEER_JOINT_0=F_Z4_TOE
STEER_JOINT_0_BODY_A=CHASSIS
STEER_JOINT_0_BODY_B=HUB_L
STEER_JOINT_0_POS_A=0.42000, -0.12000, 0.08000
STEER_JOINT_0_POS_B=0.09900, -0.12050, 0.11850

J1=F_Z4_STRUT_TOP
J1_BODY_A=CHASSIS
J1_BODY_B=F_Z4_STRUT_BODY
J1_POS=0.22210, 0.42250, -0.07350
J1_KP=1

;Z4 Front Sim Stuff

BODY_1_NAME=F_Z4_STRUT_BODY
BODY_1_MASS=1
BODY_1_INERTIA=0.1, 0.1, 0.1
BODY_1_POS=0.22210, 0.42250, -0.07350
BODY_1_MIRROR=1

SLIDER_0=F_Z4_STRUT_SLIDER
SLIDER_0_BODY_A=F_Z4_STRUT_BODY
SLIDER_0_BODY_B=HUB_L
SLIDER_0_POS_A=0.22210, 0.42250, -0.07350
SLIDER_0_POS_B=0.16230, 0.01650, 0.00000
SLIDER_0_PARITY=-1

TOE_OUT=0.00000 ;+0.12
STATIC_CAMBER=-0.41 ;-0.39
STEER_JOINT_0_LENGTH_OFFSET=-0.00021 ;Steer Toe
;55L, Driver

[FRONT_COILOVER_0] ;CORNER SPRING + DAMPER
ELECT_LOG=CORNER
PULL_FORCE=0
PRELOAD_FORCE=3655
PRELOAD=0.000

BODY_A=F_Z4_STRUT_BODY
BODY_B=HUB_L
POS_A=0.22210, 0.42250, -0.07350
POS_B=0.16230, 0.01650, 0.00000

MIN_LENGTH=0.34691
MAX_LENGTH=0.47691
BUMPSTOP_GAP=0.010

;DAMPER_TRAVEL = 0.070, 0.060
;PACKER_HEIGHT = 0.060
;BUMPSTOP_GAP = 0.010 + 0.000 = 0.010
;DAMPER_LENGTH = 0.41691 - 0.000 = 0.41691

INSTALL_RATE=340000
RATE=28020
;28020 Z4

[FRONT_SPRING_0] ;BUSHING SPRING
BODY_A=CHASSIS
BODY_B=HUB_L
POS_A=0, 1, 0
POS_B=0, 0, 0
PRELOAD=0.000
PULL_FORCE=1

RATE=1441
;F_Z4_LCA_FRONT 0.40139 m 100 Nm/rad 621 N/m
;F_Z4_LCA_REAR 0.29225 m 70 Nm/rad 820 N/m

[REAR]
TYPE=COSMIC
BASEY=-0.190
;477mm NHTSA
TRACK=1.642
;1.562 ET40
HUB_MASS=42.4
RIM_OFFSET=0.040

;HA3 Rear Geo

J0=R_HA3_STA_OUT
J0_BODY_A=R_HA3_STA_OUT_BUSHING_BODY
J0_BODY_B=HUB_L
J0_POS=0.06316, 0.01700, 0.48824

BODY_0_NAME=R_HA3_STA_OUT_BUSHING_BODY
BODY_0_MASS=10
BODY_0_INERTIA=0.1, 0.1, 0.1
BODY_0_POS=0.06316, 0.01700, 0.48824
BODY_0_MIRROR=1

SLIDER_0=R_HA3_STA_OUT_BUSHING_SLIDER
SLIDER_0_BODY_A=CHASSIS
SLIDER_0_BODY_B=R_HA3_STA_OUT_BUSHING_BODY
SLIDER_0_POS_A=0.16547, 0.01700, 0.44875
SLIDER_0_POS_B=0.06316, 0.01700, 0.48824
SLIDER_0_PARITY=-1

J1=R_HA3_UCA_IN
J1_BODY_A=CHASSIS
J1_BODY_B=R_HA3_UCA_BODY
J1_POS=0.63212, 0.04416, 0.16514

J2=R_HA3_UCA_OUT
J2_BODY_A=R_HA3_UCA_BODY
J2_BODY_B=HUB_L
J2_POS=0.11140, 0.11408, 0.00539

DJ0=R_HA3_LCA
DJ0_BODY_A=R_HA3_LCA_CAMBER_BODY
DJ0_BODY_B=HUB_L
DJ0_POS_A=0.63212, -0.03128, 0.16264
DJ0_POS_B=0.10588, -0.13984, -0.04000

;HA3 Rear Adjusters

;CAMBER
BODY_1_NAME=R_HA3_LCA_CAMBER_BODY
BODY_1_MASS=1
BODY_1_INERTIA=0.1, 0.1, 0.1
BODY_1_POS=0.63212, -0.03128, 0.16264
BODY_1_MIRROR=1

SLIDER_1=R_HA3_LCA_CAMBER_SLIDER
SLIDER_1_BODY_A=CHASSIS
SLIDER_1_BODY_B=R_HA3_LCA_CAMBER_BODY
SLIDER_1_POS_A=0.73212, -0.03128, 0.16264
SLIDER_1_POS_B=0.63212, -0.03128, 0.16264
SLIDER_1_PARITY=-1

DJ1=R_HA3_LCA_CAMBER_ADJUSTER
DJ1_BODY_A=CHASSIS
DJ1_BODY_B=R_HA3_LCA_CAMBER_BODY
DJ1_POS_A=0.73212, -0.03128, 0.16264
DJ1_POS_B=0.63212, -0.03128, 0.16264

;TOE

BODY_2_NAME=R_HA3_STA_OUT_TOE_BODY
BODY_2_MASS=1
BODY_2_INERTIA=0.1, 0.1, 0.1
BODY_2_POS=0.06316, 0.01700, 0.48824
BODY_2_MIRROR=1

SLIDER_2=R_HA3_STA_OUT_TOE_SLIDER
SLIDER_2_BODY_A=CHASSIS
SLIDER_2_BODY_B=R_HA3_STA_OUT_TOE_BODY
SLIDER_2_POS_A=-0.03684, 0.01700, 0.48824
SLIDER_2_POS_B=0.06316, 0.01700, 0.48824
SLIDER_2_PARITY=-1

STEER_JOINT_0=R_HA3_STA_OUT_TOE_ADJUSTER
STEER_JOINT_0_BODY_A=CHASSIS
STEER_JOINT_0_BODY_B=R_HA3_STA_OUT_TOE_BODY
STEER_JOINT_0_POS_A=-0.03684, 0.01700, 0.48824
STEER_JOINT_0_POS_B=0.06316, 0.01700, 0.48824

;HA3 Rear Sim Stuff

DJ2=R_HA3_UCA_HOOKES
DJ2_BODY_A=CHASSIS
DJ2_BODY_B=R_HA3_UCA_BODY
DJ2_POS_A=0.63212, 0.14416, 0.16514
DJ2_POS_B=0.63212, 0.04416, 0.26514

BODY_3_NAME=R_HA3_UCA_BODY
BODY_3_MASS=1
BODY_3_INERTIA=0.1, 0.1, 0.1
BODY_3_POS=0.37176, 0.07912, 0.08527
BODY_3_MIRROR=1

TOE_OUT=-0.00060 ;+0.15
STATIC_CAMBER=-2.31 ;-2.33
DJ1_LENGTH_OFFSET=0.00001 ;LCA Camber
;55L, Driver

[REAR_COILOVER_0] ;CORNER SPRING
PULL_FORCE=0
PRELOAD_FORCE=5825
PRELOAD=0.000

BODY_A=CHASSIS
BODY_B=R_HA3_UCA_BODY
POS_A=0.30092, 0.18952, 0.07180
POS_B=0.28988, 0.03864, 0.05924

MIN_LENGTH=0.05180
MAX_LENGTH=1.15180
BUMPSTOP_GAP=0.99

;HARDSTOP_UP = N/A
;BUMPSTOP_HEIGHT = N/A
;HARDSTOP_GAP = N/A
;SPRING_LENGTH = 0.15180

INSTALL_RATE=340000
RATE=98071
;98071 Z4

[REAR_COILOVER_1] ;CORNER DAMPER
ELECT_LOG=CORNER
BODY_A=CHASSIS
BODY_B=HUB_L
POS_A=0.27516, 0.44160, -0.13104
POS_B=0.21996, -0.10304, -0.12027

MIN_LENGTH=0.44754
MAX_LENGTH=0.66754
BUMPSTOP_GAP=0.034

;DAMPER_TRAVEL = 0.100, 0.120
;PACKER_HEIGHT = 0.066
;BUMPSTOP_GAP = 0.034 + 0.000 = 0.034
;DAMPER_LENGTH = 0.54754 - 0.000 = 0.54754

RATE=0

[REAR_SPRING_0] ;R_HA3_STA_OUT SPRING
BODY_A=R_HA3_STA_OUT_TOE_BODY
BODY_B=R_HA3_STA_OUT_BUSHING_BODY
POS_A=0.16547, 0.01700, 0.44875
POS_B=0.06316, 0.01700, 0.48824

RATE=500000
PULL_FORCE=1

[REAR_DAMPER_0] ;R_HA3_STA_OUT DAMPER
BODY_A=R_HA3_STA_OUT_TOE_BODY
BODY_B=R_HA3_STA_OUT_BUSHING_BODY
POS_A=0.16547, 0.01700, 0.44875
POS_B=0.06316, 0.01700, 0.48824

DAMP_BUMP=1000
DAMP_FAST_BUMPTHRESHOLD=50
DAMP_REBOUND=1000
DAMP_FAST_REBOUNDTHRESHOLD=50

[REAR_SPRING_1] ;BUSHING SPRING
BODY_A=CHASSIS
BODY_B=HUB_L
POS_A=0, 1, 0
POS_B=0, 0, 0
PRELOAD=0.000
PULL_FORCE=1

RATE=1467
;R_HA3_STA_OUT 0.46227 m 70 Nm/rad 328 N/m
;R_HA3_UCA 0.51590 m 100 Nm/rad 376 N/m
;R_HA3_LCA 0.53775 m 100 Nm/rad 346 N/m
;REAR_COILOVER_1 0.48943 m 100 Nm/rad 417 N/m

[GRAPHICS_OFFSETS]
WHEEL_LF=-0.025
SUSP_LF=-0.025
WHEEL_RF=0.025
SUSP_RF=0.025
WHEEL_LR=-0.015
SUSP_LR=-0.015
WHEEL_RR=0.015
SUSP_RR=0.015

[DAMAGE]
MIN_VELOCITY=40
GAIN=0.0004
MAX_DAMAGE=0.05
DEBUG_LOG=1