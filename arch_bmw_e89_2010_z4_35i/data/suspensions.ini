[HEADER]
VERSION=4

[_EXTENSION]
TORQUE_MODE_EX=2
FIX_PROGRESSIVE_RATE=1
DAMPER_LUTS=1

;[ODE]                          ;optional - tuning these parameters can help with stability. See Open Dynamics Engine Manual (http://ode.org/wiki/index.php/Manual#Joint_error_and_the_Error_Reduction_Parameter_.28ERP.29) for more information.
;ERP=0.9                        ;this is the AC default for certain joint types, others (and global value) are 0.3
;CFM=1                          ;*10^-7 - just did this to keep numbers more reasonable

[BASIC]
WHEELBASE=2.496
CG_LOCATION=0.490
;E89 Z4 35i CG 49.2%

[ARB]
FRONT=44811
REAR=4730
;F ARB diameter = 26.5 OD 19.0 ID, Z4
;F ARB MR = 0.960^2
;F ARB Droplink angle =
;F ARB dimension X = 239
;F ARB dimension Y = 564
;F ARB dimension Z = 316

;R ARB diameter = 19.0 OD Solid, Z4
;R ARB MR = 0.445^2
;R ARB Droplink angle = N/A
;R ARB dimension X = 209 (229)
;R ARB dimension Y = 560
;R ARB dimension Z = 247 (267)

[FRONT]
TYPE=COSMIC
BASEY=-0.210
TRACK=1.569
;1.511 ET29
HUB_MASS=41.5
RIM_OFFSET=0.029

;Z4 Front Geo

DJ0=F_Z4_LCA_FRONT
DJ0_BODY_A=CHASSIS
DJ0_BODY_B=HUB_L
DJ0_POS_A=0.42000, -0.07500, 0.27250
DJ0_POS_B=0.11900, -0.07000, 0.00700

DJ1=F_Z4_LCA_REAR
DJ1_BODY_A=CHASSIS
DJ1_BODY_B=HUB_L
DJ1_POS_A=0.41000, -0.13500, -0.04500
DJ1_POS_B=0.11870, -0.13500, -0.02150

BODY_1_NAME=F_Z4_LBJ_BODY
BODY_1_MASS=1
BODY_1_INERTIA=0.1, 0.1, 0.1
BODY_1_POS=0.08820, -0.10250, -0.00725
BODY_1_MIRROR=1

J0=F_Z4_LBJ
J0_BODY_A=F_Z4_LBJ_BODY
J0_BODY_B=HUB_L
J0_POS=0.08820, -0.10250, -0.00725
J0_KP=0

STEER_JOINT_0=F_Z4_TOE
STEER_JOINT_0_BODY_A=CHASSIS
STEER_JOINT_0_BODY_B=HUB_L
STEER_JOINT_0_POS_A=0.42000, -0.12000, 0.08000
STEER_JOINT_0_POS_B=0.09900, -0.12050, 0.11850

J1=F_Z4_STRUT_TOP
J1_BODY_A=CHASSIS
J1_BODY_B=F_Z4_STRUT_BODY
J1_POS=0.22210, 0.42250, -0.07350
J1_KP=1

;Z4 Front Sim Stuff

BODY_0_NAME=F_Z4_STRUT_BODY
BODY_0_MASS=1
BODY_0_INERTIA=0.1, 0.1, 0.1
BODY_0_POS=0.22210, 0.42250, -0.07350
BODY_0_MIRROR=1

SLIDER_0=F_Z4_STRUT_SLIDER
SLIDER_0_BODY_A=F_Z4_STRUT_BODY
SLIDER_0_BODY_B=HUB_L
SLIDER_0_POS_A=0.22210, 0.42250, -0.07350
SLIDER_0_POS_B=0.16230, 0.01650, 0.00000
SLIDER_0_PARITY=-1

TOE_OUT=0.00000 ;+0.12
STATIC_CAMBER=-0.41 ;-0.39
STEER_JOINT_0_LENGTH_OFFSET=-0.00021 ;Steer Toe
;55L, Driver

[FRONT_COILOVER_0] ;Corner spring
ELECT_LOG=CORNER
PULL_FORCE=0
PRELOAD_FORCE=0
PRELOAD=0.138 ;0.138

BODY_A=F_Z4_STRUT_BODY
BODY_B=HUB_L
POS_A=0.22210, 0.42250, -0.07350
POS_B=0.16230, 0.01650, 0.00000

MIN_LENGTH=0.34691
MAX_LENGTH=0.47691
BUMPSTOP_GAP=0.010

;DAMPER_TRAVEL = 0.070, 0.060
;PACKER_HEIGHT = 0.060
;BUMPSTOP_GAP = 0.010 + 0.000 = 0.010
;DAMPER_LENGTH = 0.41691 - 0.000 = 0.41691

INSTALL_RATE=545454.5455
RATE=28020
;28020 Z4

[FRONT_SPRING_0] ;Slide bushings
BODY_A=CHASSIS
BODY_B=HUB_L
POS_A=0, 1, 0
POS_B=0, 0, 0

RATE=800
;Soft rubber = 200 N/m
;Stiff rubber = 500 N/m
;2x 500 N/m bushing = 800 N/m

[REAR]
TYPE=COSMIC
BASEY=-0.210
TRACK=1.642
;1.562 ET40
HUB_MASS=42.4
RIM_OFFSET=0.040

;HA3 Rear Geo

J0=R_HA3_STA
J0_BODY_A=R_HA3_STA_BODY
J0_BODY_B=HUB_L
J0_POS=0.06215, 0.01700, 0.45776

J1=R_HA3_UCA
J1_BODY_A=CHASSIS_REAR
J1_BODY_B=R_HA3_UCA_BODY
J1_POS=0.59555, 0.03340, 0.15482

J2=R_HA3_UCA_BJ
J2_BODY_A=R_HA3_UCA_BODY
J2_BODY_B=HUB_L
J2_POS=0.10738, 0.10695, 0.00505
J2_KP=1

DJ0=R_HA3_LCA
DJ0_BODY_A=R_HA3_LCA_BODY
DJ0_BODY_B=HUB_L
DJ0_POS_A=0.59555, -0.03733, 0.15232
DJ0_POS_B=0.10220, -0.13110, -0.04000
DJ0_KP=0

;HA3 Rear Adjusters

;CAMBER
BODY_2_NAME=R_HA3_LCA_BODY
BODY_2_MASS=1
BODY_2_INERTIA=0.1, 0.1, 0.1
BODY_2_POS=0.59555, -0.03733, 0.15232
BODY_2_MIRROR=1

SLIDER_0=R_HA3_LCA_SLIDER
SLIDER_0_BODY_A=CHASSIS_REAR
SLIDER_0_BODY_B=R_HA3_LCA_BODY
SLIDER_0_POS_A=0.69555, -0.03733, 0.15232
SLIDER_0_POS_B=0.59555, -0.03733, 0.15232
SLIDER_0_PARITY=-1

DJ2=R_HA3_LCA_ADJUSTER
DJ2_BODY_A=CHASSIS_REAR
DJ2_BODY_B=R_HA3_LCA_BODY
DJ2_POS_A=0.69555, -0.03733, 0.15232
DJ2_POS_B=0.59555, -0.03733, 0.15232

;TOE
BODY_3_NAME=R_HA3_STA_BODY
BODY_3_MASS=1
BODY_3_INERTIA=0.1, 0.1, 0.1
BODY_3_POS=0.06215, 0.01700, 0.45776
BODY_3_MIRROR=1

SLIDER_1=R_HA3_STA_OUT_SLIDER
SLIDER_1_BODY_A=CHASSIS_REAR
SLIDER_1_BODY_B=R_HA3_STA_BODY
SLIDER_1_POS_A=-0.03785, 0.01700, 0.45776
SLIDER_1_POS_B=0.06215, 0.01700, 0.45776
SLIDER_1_PARITY=-1

DJ3=R_HA3_STA_OUT_ADJUSTER
DJ3_BODY_A=CHASSIS_REAR
DJ3_BODY_B=R_HA3_STA_BODY
DJ3_POS_A=-0.03785, 0.01700, 0.45776
DJ3_POS_B=0.06215, 0.01700, 0.45776

;HA3 Rear Sim Stuff

DJ1=R_HA3_UCA_HOOKES
DJ1_BODY_A=CHASSIS_REAR
DJ1_BODY_B=R_HA3_UCA_BODY
DJ1_POS_A=0.59555, 0.13340, 0.15482
DJ1_POS_B=0.59555, 0.03340, 0.25482

BODY_1_NAME=R_HA3_UCA_BODY
BODY_1_MASS=1
BODY_1_INERTIA=0.1, 0.1, 0.1
BODY_1_POS=0.35147, 0.07018, 0.07994
BODY_1_MIRROR=1

BODY_0_NAME=CHASSIS_REAR
BODY_0_MASS=618.05
;1555 - ((55 * 2) + (60 * 2) + (1 * 10)))  * (1 - 0.530)
BODY_0_INERTIA=1.350, 1.300, 4.100
BODY_0_CARPOS=0, 0, 0

HJ0=TORSION_HINGE
HJ0_BODY_A=CHASSIS
HJ0_BODY_B=CHASSIS_REAR
HJ0_CARPOS_A=0, 0, 1
HJ0_CARPOS_B=0, 0, -1

ENGINE_TORQUE_BODY=CHASSIS_REAR

TOE_OUT=0.00000 ;+0.15
STATIC_CAMBER=-2.31 ;-2.33
DJ2_LENGTH_OFFSET=0.00001 ;LCA Camber
DJ3_LENGTH_OFFSET=0.00121 ;Steer Toe
;55L, Driver

[REAR_COILOVER_0] ;Corner spring
PULL_FORCE=0
PRELOAD_FORCE=0
PRELOAD=0.068 ;0.068

BODY_A=CHASSIS_REAR
BODY_B=R_HA3_UCA_BODY
POS_A=0.28505, 0.17768, 0.06731
POS_B=0.27470, 0.03623, 0.05553

MIN_LENGTH=0.04232
MAX_LENGTH=1.14232
BUMPSTOP_GAP=0.99

;HARDSTOP_UP = N/A
;BUMPSTOP_HEIGHT = N/A
;HARDSTOP_GAP = N/A
;SPRING_LENGTH = 0.14232

INSTALL_RATE=545454.5455
RATE=98071
;98071 Z4

[REAR_COILOVER_1] ;Corner damper
ELECT_LOG=CORNER
BODY_A=CHASSIS_REAR
BODY_B=HUB_L
POS_A=0.26090, 0.41400, -0.12285
POS_B=0.20915, -0.09660, -0.11275

MIN_LENGTH=0.41332
MAX_LENGTH=0.63332
BUMPSTOP_GAP=0.034

;DAMPER_TRAVEL = 0.100, 0.120
;PACKER_HEIGHT = 0.066
;BUMPSTOP_GAP = 0.034 + 0.000 = 0.034
;DAMPER_LENGTH = 0.51332 - 0.000 = 0.51332

RATE=0

[REAR_SPRING_0] ;Slide bushings
BODY_A=CHASSIS_REAR
BODY_B=HUB_L
POS_A=0, 1, 0
POS_B=0, 0, 0

RATE=3000
;Soft rubber = 200 N/m
;Stiff rubber = 500 N/m
;6x 500 N/m bushing = 3000 N/m

[REAR_TORSION_0]
RATE=16000
PRELOAD=0
HINGE=TORSION_HINGE
PARITY=0

[REAR_DAMPER_0] ;Torsion damper
BODY_A=CHASSIS
BODY_B=CHASSIS_REAR
POS_A=0, 1, 0
POS_B=0, 0, 0
DAMP_BUMP=10000
DAMP_FAST_BUMP=10000
DAMP_FAST_BUMPTHRESHOLD=1
DAMP_REBOUND=10000
DAMP_FAST_REBOUND=10000
DAMP_FAST_REBOUNDTHRESHOLD=1
PARITY=0

[GRAPHICS_OFFSETS]
WHEEL_LF=-0.025
SUSP_LF=-0.025
WHEEL_RF=0.025
SUSP_RF=0.025
WHEEL_LR=-0.015
SUSP_LR=-0.015
WHEEL_RR=0.015
SUSP_RR=0.015

[DAMAGE]
MIN_VELOCITY=40
GAIN=0.0004
MAX_DAMAGE=0.05
DEBUG_LOG=1