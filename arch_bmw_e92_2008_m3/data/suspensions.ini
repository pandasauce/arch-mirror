[HEADER]
VERSION=4

[_EXTENSION]
TORQUE_MODE_EX=2
FIX_PROGRESSIVE_RATE=1
DAMPER_LUTS=1

;[ODE]                          ;optional - tuning these parameters can help with stability. See Open Dynamics Engine Manual (http://ode.org/wiki/index.php/Manual#Joint_error_and_the_Error_Reduction_Parameter_.28ERP.29) for more information.
;ERP=0.9                        ;this is the AC default for certain joint types, others (and global value) are 0.3
;CFM=1                          ;*10^-7 - just did this to keep numbers more reasonable

[BASIC]
WHEELBASE=2.760
CG_LOCATION=0.520
;2005 E90 320i 49.3%
;2005 E90 330i 49.7%
;2007 E92 6MT 50.8%
;2008 E90 M3 6MT 50.6%
;2008 E92 M3 6MT 50.9%

[ARB]
FRONT=43644
REAR=16084
;F ARB diameter = 26.5 OD 19.0 ID M3/1M
;F ARB MR = 0.960^2
;F ARB WIDTH	= 594
;F ARB LEVER	= 239
;F ARB DIAGONAL	= 316

;R ARB diameter = 22.5 OD 19.5 ID M3/1M
;R ARB MR = 0.900^2
;R ARB WIDTH	= 765
;R ARB LEVER	= 143
;R ARB DIAGONAL	= 366

[FRONT]
TYPE=COSMIC
BASEY=-0.210
TRACK=1.598
;1.540 ET29
HUB_MASS=45
RIM_OFFSET=0.029

;M3 Front Geo

DJ0=F_M3_LCA_FRONT
DJ0_BODY_A=CHASSIS
DJ0_BODY_B=HUB_L
DJ0_POS_A=0.42000, -0.07500, 0.27250
DJ0_POS_B=0.11900, -0.07000, 0.01200

DJ1=F_M3_LCA_REAR
DJ1_BODY_A=CHASSIS
DJ1_BODY_B=HUB_L
DJ1_POS_A=0.41000, -0.13500, -0.04500
DJ1_POS_B=0.11870, -0.13500, -0.01650

BODY_1_NAME=F_M3_LBJ_BODY
BODY_1_MASS=1
BODY_1_INERTIA=0.1, 0.1, 0.1
BODY_1_POS=0.08820, -0.10250, -0.00225
BODY_1_MIRROR=1

J0=F_M3_LBJ
J0_BODY_A=F_M3_LBJ_BODY
J0_BODY_B=HUB_L
J0_POS=0.08820, -0.10250, -0.00225
J0_KP=0

J1=F_M3_STRUT_TOP
J1_BODY_A=CHASSIS
J1_BODY_B=F_M3_STRUT_BODY
J1_POS=0.22910, 0.42250, -0.06800
J1_KP=1

STEER_JOINT_0=F_M3_TOE
STEER_JOINT_0_BODY_A=CHASSIS
STEER_JOINT_0_BODY_B=HUB_L
STEER_JOINT_0_POS_A=0.42000, -0.12000, 0.08000
STEER_JOINT_0_POS_B=0.09100, -0.12050, 0.12350

;M3 Front Sim Stuff

BODY_0_NAME=F_M3_STRUT_BODY
BODY_0_MASS=1
BODY_0_INERTIA=0.1, 0.1, 0.1
BODY_0_POS=0.22910, 0.42250, -0.06800
BODY_0_MIRROR=1

SLIDER_0=F_M3_STRUT_SLIDER
SLIDER_0_BODY_A=F_M3_STRUT_BODY
SLIDER_0_BODY_B=HUB_L
SLIDER_0_POS_A=0.22910, 0.42250, -0.06800
SLIDER_0_POS_B=0.16230, 0.01650, 0.00000
SLIDER_0_PARITY=-1

TOE_OUT=0.00000 ;0.00
STATIC_CAMBER=-1.01 ;-1.0
STEER_JOINT_0_LENGTH_OFFSET=0.00001 ;Steer Toe
;63L, Driver

[FRONT_COILOVER_0] ;CORNER SPRING + DAMPER
ELECT_LOG=CORNER
PULL_FORCE=0
PRELOAD_FORCE=0
PRELOAD=0.151

BODY_A=F_M3_STRUT_BODY
BODY_B=HUB_L
POS_A=0.22910, 0.42250, -0.06800
POS_B=0.16230, 0.01650, 0.00000

MIN_LENGTH=0.34704
MAX_LENGTH=0.47704
BUMPSTOP_GAP=0.010

;DAMPER_TRAVEL = 0.070, 0.060
;PACKER_HEIGHT = 0.060
;BUMPSTOP_GAP = 0.010 + 0.000 = 0.010
;DAMPER_LENGTH = 0.41704 - 0.000 = 0.41704

INSTALL_RATE=550000
RATE=28020
;28020 M3

[FRONT_SPRING_0] ;BUSHING SPRING
BODY_A=CHASSIS
BODY_B=HUB_L
POS_A=0, 1, 0
POS_B=0, 0, 0

RATE=500
;Soft rubber = 200 N/m
;Stiff rubber = 250 N/m
;2x 250 N/m bushing = 500 N/m

[REAR]
TYPE=COSMIC
BASEY=-0.210
TRACK=1.586
;1.540 ET23
HUB_MASS=45
RIM_OFFSET=0.023

;HA5 Rear Geo

DJ0=R_HA5_UCA_FRONT
DJ0_BODY_A=CHASSIS_REAR
DJ0_BODY_B=HUB_L
DJ0_POS_A=0.32063, 0.06355, 0.17575
DJ0_POS_B=0.10972, 0.07510, 0.06460

DJ1=R_HA5_UCA_REAR
DJ1_BODY_A=CHASSIS_REAR
DJ1_BODY_B=HUB_L
DJ1_POS_A=0.36765, 0.10394, -0.02993
DJ1_POS_B=0.10688, 0.14690, 0.00570
DJ1_KP=1

DJ2=R_HA5_LCA_FRONT
DJ2_BODY_A=R_HA5_LCA_FRONT_BUSHING_BODY
DJ2_BODY_B=HUB_L
DJ2_POS_A=0.37003, -0.06704, 0.23560
DJ2_POS_B=0.12670, -0.13010, 0.06510

BODY_2_NAME=R_HA5_LCA_FRONT_BUSHING_BODY
BODY_2_MASS=10
BODY_2_INERTIA=0.1, 0.1, 0.1
BODY_2_POS=0.37003, -0.06704, 0.23560
BODY_2_MIRROR=1

SLIDER_0=R_HA5_LCA_FRONT_BUSHING_SLIDER
SLIDER_0_BODY_A=CHASSIS_REAR
SLIDER_0_BODY_B=R_HA5_LCA_FRONT_BUSHING_BODY
SLIDER_0_POS_A=0.42180, -0.06704, 0.16625
SLIDER_0_POS_B=0.37003, -0.06704, 0.23560
SLIDER_0_PARITY=-1

J0=R_HA5_LCA_REAR
J0_BODY_A=R_HA5_RLCA_PICKUP
J0_BODY_B=R_HA5_LCA_REAR_BODY
J0_POS=0.50730, -0.10927, -0.16150

J1=R_HA5_LCA_REAR_BJ
J1_BODY_A=R_HA5_LCA_REAR_BODY
J1_BODY_B=HUB_L
J1_POS=0.13348, -0.10210, -0.04988
J1_KP=0

STEER_JOINT_0=R_HA5_TOE
STEER_JOINT_0_BODY_A=CHASSIS_REAR
STEER_JOINT_0_BODY_B=HUB_L
STEER_JOINT_0_POS_A=0.48403, -0.05694, -0.21090
STEER_JOINT_0_POS_B=0.10973, -0.05010, -0.16815

;HA5 Rear Adjusters

BODY_3_NAME=R_HA5_RLCA_CAMBER_BODY
BODY_3_MASS=1
BODY_3_INERTIA=0.1, 0.1, 0.1
BODY_3_POS=0.50730, -0.10927, -0.16150
BODY_3_MIRROR=1

SLIDER_1=R_HA5_RLCA_CAMBER_SLIDER
SLIDER_1_BODY_A=CHASSIS_REAR
SLIDER_1_BODY_B=R_HA5_RLCA_CAMBER_BODY
SLIDER_1_POS_A=0.60730, -0.10927, -0.16150
SLIDER_1_POS_B=0.50730, -0.10927, -0.16150
SLIDER_1_PARITY=-1

DJ4=R_HA5_RLCA_CAMBER_ADJUSTER
DJ4_BODY_A=CHASSIS_REAR
DJ4_BODY_B=R_HA5_RLCA_CAMBER_BODY
DJ4_POS_A=0.60730, -0.10927, -0.16150
DJ4_POS_B=0.50730, -0.10927, -0.16150

;HA5 Rear Sim Stuff

DJ3=R_HA5_LCA_REAR_HOOKES
DJ3_BODY_A=CHASSIS_REAR
DJ3_BODY_B=R_HA5_LCA_REAR_BODY
DJ3_POS_A=0.50730, -0.00927, -0.16150
DJ3_POS_B=0.54730, -0.10927, -0.06150

BODY_1_NAME=R_HA5_LCA_REAR_BODY
BODY_1_MASS=1
BODY_1_INERTIA=0.1, 0.1, 0.1
BODY_1_POS=0.32039, -0.10569, -0.10569
BODY_1_MIRROR=1

BODY_0_NAME=CHASSIS_REAR
BODY_0_MASS=696.96
;1658 - ((45 * 2) + (45 * 2) + (1 * 6) + (10 * 2)))  * (1 - 0.520)
BODY_0_INERTIA=1.370, 1.300, 4.300
BODY_0_CARPOS=0, 0, 0

HJ0=TORSION_HINGE
HJ0_BODY_A=CHASSIS
HJ0_BODY_B=CHASSIS_REAR
HJ0_CARPOS_A=0, 0, 1
HJ0_CARPOS_B=0, 0, -1

ENGINE_TORQUE_BODY=CHASSIS_REAR

TOE_OUT=0.00030 ;+0.14
STATIC_CAMBER=-1.61 ;-1.60
DJ4_LENGTH_OFFSET=0.00001 ;RLCA Camber
;63L, Driver

[REAR_COILOVER_0] ;CORNER SPRING
PULL_FORCE=0
PRELOAD_FORCE=0
PRELOAD=0.079

BODY_A=CHASSIS_REAR
BODY_B=R_HA5_LCA_REAR_BODY
POS_A=0.32000, 0.12000, -0.11353
POS_B=0.29566, -0.10521, -0.09500

MIN_LENGTH=0.07728
MAX_LENGTH=1.22728
BUMPSTOP_GAP=0.99

;HARDSTOP_UP = N/A
;BUMPSTOP_HEIGHT = N/A
;HARDSTOP_GAP = N/A
;SPRING_LENGTH = 0.22728

INSTALL_RATE=550000
RATE=96320
;96320 M3

[REAR_COILOVER_1] ;CORNER DAMPER
ELECT_LOG=CORNER
BODY_A=CHASSIS_REAR
BODY_B=R_HA5_LCA_REAR_BODY
POS_A=0.24985, 0.50000, -0.07743
POS_B=0.20188, -0.10339, -0.06603

MIN_LENGTH=0.51540
MAX_LENGTH=0.66540
BUMPSTOP_GAP=0.020

;DAMPER_TRAVEL = 0.090, 0.060
;PACKER_HEIGHT = 0.070
;BUMPSTOP_GAP = 0.020 + 0.000 = 0.020
;DAMPER_LENGTH = 0.60540 - 0.000 = 0.60540

RATE=0

[REAR_SPRING_1] ;R_HA5_LCA_FRONT SPRING
BODY_A=CHASSIS_REAR
BODY_B=R_HA5_LCA_FRONT_BUSHING_BODY
POS_A=0.42180, -0.06704, 0.16625
POS_B=0.37003, -0.06704, 0.23560

RATE=1000000
PULL_FORCE=1

[REAR_DAMPER_1] ;R_HA5_LCA_FRONT DAMPER
BODY_A=CHASSIS_REAR
BODY_B=R_HA5_LCA_FRONT_BUSHING_BODY
POS_A=0.42180, -0.06704, 0.16625
POS_B=0.37003, -0.06704, 0.23560

DAMP_BUMP=3000
DAMP_FAST_BUMP=3000
DAMP_FAST_BUMPTHRESHOLD=1
DAMP_REBOUND=3000
DAMP_FAST_REBOUND=3000
DAMP_FAST_REBOUNDTHRESHOLD=1

[REAR_SPRING_0] ;BUSHING SPRING
BODY_A=CHASSIS_REAR
BODY_B=HUB_L
POS_A=0, 1, 0
POS_B=0, 0, 0

RATE=2250
;Soft rubber = 200 N/m
;Stiff rubber = 250 N/m
;9x 250 N/m bushing = 2250 N/m

[REAR_TORSION_0] ;TORSION SPRING
RATE=22500
PRELOAD=0
HINGE=TORSION_HINGE
PARITY=0

[REAR_DAMPER_0] ;TORSION DAMPER
BODY_A=CHASSIS
BODY_B=CHASSIS_REAR
POS_A=0, 1, 0
POS_B=0, 0, 0

DAMP_BUMP=10000
DAMP_FAST_BUMP=10000
DAMP_FAST_BUMPTHRESHOLD=1
DAMP_REBOUND=10000
DAMP_FAST_REBOUND=10000
DAMP_FAST_REBOUNDTHRESHOLD=1
PARITY=0

[GRAPHICS_OFFSETS]
WHEEL_LF=-0.000
SUSP_LF=-0.000
WHEEL_RF=0.000
SUSP_RF=0.000
WHEEL_LR=-0.010
SUSP_LR=-0.010
WHEEL_RR=0.010
SUSP_RR=0.010

[DAMAGE]
MIN_VELOCITY=40
GAIN=0.0004
MAX_DAMAGE=0.05
DEBUG_LOG=1