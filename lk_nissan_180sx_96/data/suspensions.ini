[HEADER]
VERSION=4

[_EXTENSION]
TORQUE_MODE_EX=2
FIX_PROGRESSIVE_RATE=1
USE_DWB2=0
DAMPER_LUTS=1

;[ODE]                          ;optional - tuning these parameters can help with stability. See Open Dynamics Engine Manual (http://ode.org/wiki/index.php/Manual#Joint_error_and_the_Error_Reduction_Parameter_.28ERP.29) for more information.
;ERP=0.9                        ;this is the AC default for certain joint types, others (and global value) are 0.3
;CFM=1                          ;*10^-7 - just did this to keep numbers more reasonable

[BASIC]
WHEELBASE=2.475
CG_LOCATION=0.555
;C&D 240SX SE S13 Hatch 52.8% 1269kg with fuel?
;Driver 0.5% rearward

[ARB]
FRONT=26133
REAR=5371
;F ARB diameter = 25.0 OD PS13
;F ARB MR = 0.554^2
;F ARB WIDTH	= 882
;F ARB LEVER	= 161
;F ARB DIAGONAL	= 265 (164)

;R ARB diameter = 19.1 OD PS13
;R ARB MR = 0.425^2
;R ARB WIDTH	= 763
;R ARB LEVER	= 146
;R ARB DIAGONAL	= 324 (173)

[FRONT]
TYPE=COSMIC
BASEY=-0.250
TRACK=1.545
;1.465 ET40 S13 JDM
;1.465 ET40 200SX EUDM
HUB_MASS=42.3
;40.0 S13 Zenki
;43.3 180SX Type II
;42.3 180SX Type X
RIM_OFFSET=0.040

;S13 Front Geo

DJ0=F_S13_LCA_FRONT
DJ0_BODY_A=CHASSIS
DJ0_BODY_B=HUB_L
DJ0_POS_A=0.38250, -0.08000, 0.25125
DJ0_POS_B=0.09375, -0.08000, 0.00750

DJ1=F_S13_LCA_REAR
DJ1_BODY_A=CHASSIS
DJ1_BODY_B=HUB_L
DJ1_POS_A=0.40625, -0.06600, 0.02250
DJ1_POS_B=0.09375, -0.08000, 0.00750
DJ1_KP=0

STEER_JOINT_0=F_S13_TOE
STEER_JOINT_0_BODY_A=CHASSIS
STEER_JOINT_0_BODY_B=HUB_L
STEER_JOINT_0_POS_A=0.41250, -0.07500, -0.06250
STEER_JOINT_0_POS_B=0.10750, -0.08250, -0.07937

J0=F_S13_STRUT_TOP
J0_BODY_A=CHASSIS
J0_BODY_B=F_S13_STRUT_BODY
J0_POS=0.22312, 0.48000, -0.05900
J0_KP=1

;SIM STUFF

BODY_0_NAME=F_S13_STRUT_BODY
BODY_0_MASS=1
BODY_0_INERTIA=0.1, 0.1, 0.1
BODY_0_POS=0.22312, 0.48000, -0.05900
BODY_0_MIRROR=1

SLIDER_0=F_S13_STRUT_SLIDER
SLIDER_0_BODY_A=F_S13_STRUT_BODY
SLIDER_0_BODY_B=HUB_L
SLIDER_0_POS_A=0.22312, 0.48000, -0.05900
SLIDER_0_POS_B=0.21000, 0.12000, 0.01000
SLIDER_0_PARITY=-1

TOE_OUT=0.00000 ;+0.037
STATIC_CAMBER=-0.91 ;-0.85
STEER_JOINT_0_LENGTH_OFFSET=0.00001 ;Steer Toe
;60L

[FRONT_COILOVER_0] ;CORNER SPRING + DAMPER
ELECT_LOG=CORNER
PULL_FORCE=0
PRELOAD_FORCE=3035
PRELOAD=-0.0085
;Driver -0.008 @ wheel -0.0085 @ damper

BODY_A=F_S13_STRUT_BODY
BODY_B=HUB_L
POS_A=0.22312, 0.48000, -0.05900
POS_B=0.21000, 0.12000, 0.01000

MIN_LENGTH=0.28578
MAX_LENGTH=0.43878
BUMPSTOP_GAP=0.033

;DAMPER_TRAVEL = 0.081, 0.072
;PACKER_HEIGHT = 0.048
;BUMPSTOP_GAP = 0.033 + 0.000 = 0.033
;DAMPER_LENGTH = 0.36678 - 0.000 = 0.36678

;S13 Zenki 81/79 -0
;200SX Zenki 81/79 -0
;180SX Zenki 81.5/79 -0
;S13 Chuki 81/72 -0

INSTALL_RATE=550000
RATE=17658
;Standard cars
;JDM 1989 180SX, S13 = 15696 / 19620
;JDM 1992 180SX, S13 = 17658 / 17658
;EUDM 1989 200SX = 15696 / 19620
;USDM 1990 240SX = 19620 / 19620
;USDM 1992 240SX = 17658 / 17658
;HICAS cars
;JDM 1989 180SX = 19620 / 21582
;JDM 1992 180SX = 19620 / 19620
;USDM 1990 240SX = 21582 / 21582
;USDM 1992 240SX = 19620 / 19620

[FRONT_SPRING_0] ;BUSHING SPRING
BODY_A=CHASSIS
BODY_B=HUB_L
POS_A=0, 1, 0
POS_B=0, 0, 0
PRELOAD=0.008
PULL_FORCE=1

RATE=1721
;F_S13_LCA_FRONT 0.37788 m 100 Nm/rad 700 N/m
;F_S13_LCA_REAR 0.31302 m 100 Nm/rad 2408 N/m

[REAR]
TYPE=COSMIC
BASEY=-0.250
TRACK=1.540
;1.460 ET40 S13 JDM
;1.465 ET40 200SX EUDM
HUB_MASS=44.3
;43.9 S13 Zenki
;45.3 180SX Type II
;44.3 180SX Type X
RIM_OFFSET=0.040

;S13 Rear Geo

DJ0=R_S13_UCA_FRONT
DJ0_BODY_A=CHASSIS_REAR_0
DJ0_BODY_B=HUB_L
DJ0_POS_A=0.29441, 0.09222, 0.16337
DJ0_POS_B=0.10761, 0.10573, 0.03782

DJ1=R_S13_UCA_REAR
DJ1_BODY_A=R_S13_RUCA_CAMBER_BODY
DJ1_BODY_B=HUB_L
DJ1_POS_A=0.40557, 0.09416, -0.09057
DJ1_POS_B=0.10438, 0.12416, -0.05501
DJ1_KP=1

DJ2=R_S13_LCA_FRONT
DJ2_BODY_A=R_S13_LCA_BUSHING_BODY
DJ2_BODY_B=HUB_L
DJ2_POS_A=0.27206, -0.01883, 0.30121
DJ2_POS_B=0.11013, -0.11266, 0.00000

DJ3=R_S13_LCA_REAR
DJ3_BODY_A=R_S13_LCA_BUSHING_BODY
DJ3_BODY_B=HUB_L
DJ3_POS_A=0.41707, -0.10231, 0.02980
DJ3_POS_B=0.11013, -0.11266, 0.00000
DJ3_KP=0

BODY_0_NAME=R_S13_LCA_BUSHING_BODY
BODY_0_MASS=10
BODY_0_INERTIA=0.1, 0.1, 0.1
BODY_0_POS=0.41707, -0.10231, 0.02980
BODY_0_MIRROR=1

SLIDER_0=R_S13_LCA_BUSHING_SLIDER
SLIDER_0_BODY_A=CHASSIS_REAR_0
SLIDER_0_BODY_B=R_S13_LCA_BUSHING_BODY
SLIDER_0_POS_A=0.27206, -0.01883, 0.30121
SLIDER_0_POS_B=0.41707, -0.10231, 0.02980
SLIDER_0_PARITY=-1

STEER_JOINT_0=R_S13_TOE
STEER_JOINT_0_BODY_A=CHASSIS_REAR_0
STEER_JOINT_0_BODY_B=HUB_L
STEER_JOINT_0_POS_A=0.55043, -0.03320, -0.13328
STEER_JOINT_0_POS_B=0.19635, -0.02644, -0.17075

;CAMBER

BODY_1_NAME=R_S13_RUCA_CAMBER_BODY
BODY_1_MASS=1
BODY_1_INERTIA=0.1, 0.1, 0.1
BODY_1_POS=0.40557, 0.09416, -0.09057
BODY_1_MIRROR=1

SLIDER_1=R_S13_RUCA_CAMBER_SLIDER
SLIDER_1_BODY_A=CHASSIS_REAR_0
SLIDER_1_BODY_B=R_S13_RUCA_CAMBER_BODY
SLIDER_1_POS_A=0.50557, 0.09416, -0.09057
SLIDER_1_POS_B=0.40557, 0.09416, -0.09057
SLIDER_1_PARITY=-1

DJ4=R_S13_RUCA_CAMBER_ADJUSTER
DJ4_BODY_A=CHASSIS_REAR_0
DJ4_BODY_B=R_S13_RUCA_CAMBER_BODY
DJ4_POS_A=0.50557, 0.09416, -0.09057
DJ4_POS_B=0.40557, 0.09416, -0.09057

;SIM STUFF

BODY_2_NAME=CHASSIS_REAR_0
BODY_2_MASS=249.6
;1295 - ((42.3 * 2) + (44.3 * 2))) * (1 - 0.555) / 2
BODY_2_INERTIA=1.220, 1.240, 4.220
BODY_2_CARPOS=0, 0, 0
BODY_2_USE_FOR_ARB=1

BODY_3_NAME=CHASSIS_REAR_1
BODY_3_MASS=249.6
BODY_3_INERTIA=1.220, 1.240, 4.220
BODY_3_CARPOS=0, 0, 0

HJ0=TORSION_HINGE
HJ0_BODY_A=CHASSIS_REAR_1
HJ0_BODY_B=CHASSIS_REAR_0
HJ0_CARPOS_A=0, 0, 1
HJ0_CARPOS_B=0, 0, -1

HJ1=PITCH_HINGE
HJ1_BODY_A=CHASSIS
HJ1_BODY_B=CHASSIS_REAR_1
HJ1_CARPOS_A=1, 0, 0
HJ1_CARPOS_B=-1, 0, 0

ENGINE_TORQUE_BODY=CHASSIS_REAR_0

TOE_OUT=0.00050 ;+0.116 Standard, +0.102 HICAS
STATIC_CAMBER=-1.11 ;-1.10 Standard, -1.05 HICAS
DJ4_LENGTH_OFFSET=0.00001 ;RUCA Camber
;60L

[REAR_COILOVER_0] ;CORNER SPRING + DAMPER
ELECT_LOG=CORNER
PULL_FORCE=0
PRELOAD_FORCE=2795
PRELOAD=-0.0085
;Driver -0.008 @ wheel -0.0085 @ damper

BODY_A=CHASSIS_REAR_0
BODY_B=HUB_L
POS_A=0.29061, 0.38921, -0.02788
POS_B=0.16301, -0.05748, -0.10108

MIN_LENGTH=0.39029
MAX_LENGTH=0.54229
BUMPSTOP_GAP=0.014

;DAMPER_TRAVEL = 0.080, 0.072
;PACKER_HEIGHT = 0.066
;BUMPSTOP_GAP = 0.014 + 0.000 = 0.014
;DAMPER_LENGTH = 0.47029 - 0.000 = 0.47029

;S13 Zenki 80/75 -0
;200SX Zenki 80/75 -0
;180SX Zenki 80/75 -0
;S13 Chuki 80/72 -0
;S14 Zenki 111/75 -0

INSTALL_RATE=550000
RATE=17658
;Standard cars
;JDM 1989 180SX, S13 = 15696 / 19620
;JDM 1992 180SX, S13 = 17658 / 17658
;EUDM 1989 200SX = 15696 / 19620
;USDM 1990 240SX = 19620 / 19620
;USDM 1992 240SX = 17658 / 17658
;HICAS cars
;JDM 1989 180SX = 19620 / 21582
;JDM 1992 180SX = 19620 / 19620
;USDM 1990 240SX = 21582 / 21582
;USDM 1992 240SX = 19620 / 19620

[REAR_SPRING_0] ;R_S13_LCA_REAR SPRING
BODY_A=CHASSIS_REAR_0
BODY_B=R_S13_LCA_BUSHING_BODY
POS_A=0.27206, -0.01883, 0.30121
POS_B=0.41707, -0.10231, 0.02980

RATE=2000000
PULL_FORCE=1

[REAR_DAMPER_0] ;R_S13_LCA_REAR DAMPER
BODY_A=CHASSIS_REAR_0
BODY_B=R_S13_LCA_BUSHING_BODY
POS_A=0.27206, -0.01883, 0.30121
POS_B=0.41707, -0.10231, 0.02980

DAMP_BUMP=4472
DAMP_REBOUND=4472
DAMP_FAST_BUMPTHRESHOLD=99
DAMP_FAST_REBOUNDTHRESHOLD=99

[REAR_SPRING_1] ;BUSHING SPRING
BODY_A=CHASSIS_REAR_0
BODY_B=HUB_L
POS_A=0, 1, 0
POS_B=0, 0, 0
PRELOAD=0.008
PULL_FORCE=1

RATE=8610
;R_S13_UCA_FRONT 0.22548 m 70 Nm/rad 1377 N/m
;R_S13_UCA_FRONT OUT 0.22548 m 100 Nm/rad 1967 N/m
;R_S13_UCA_REAR 0.30476 m 70 Nm/rad 754 N/m
;R_S13_UCA_REAR OUT 0.30476 m 70 Nm/rad 754 N/m
;R_S13_LCA_FRONT 0.35462 m 100 Nm/rad 795 N/m
;R_S13_LCA_REAR 0.30856 m 70 Nm/rad 735 N/m
;R_S13_TOE 0.35612 m 100 Nm/rad 789 N/m
;R_S13_TOE OUT 0.35612 m 100 Nm/rad 789 N/m
;REAR_COILOVER_0 0.39213 m 100 Nm/rad 650 N/m

[REAR_TORSION_0] ;X TORSION SPRING
RATE=6000
HINGE=TORSION_HINGE
PARITY=0

[REAR_DAMPER_1] ;X TORSION DAMPER
BODY_A=CHASSIS_REAR_1
BODY_B=CHASSIS_REAR_0
POS_A=	-0.230, 1, 1.374
POS_B=	-0.230, 0, 1.374

DAMP_BUMP=9263
DAMP_REBOUND=9263
DAMP_FAST_BUMPTHRESHOLD=99
DAMP_FAST_REBOUNDTHRESHOLD=99
PARITY=0

[REAR_TORSION_1] ;Y PITCH SPRING
RATE=60000
HINGE=PITCH_HINGE
PARITY=0

[REAR_DAMPER_2] ;Y PITCH DAMPER
BODY_A=CHASSIS
BODY_B=CHASSIS_REAR_1
POS_A=	0.770, 1, 2.374
POS_B=	0.770, 0, 2.374

DAMP_BUMP=29293
DAMP_REBOUND=29293
DAMP_FAST_BUMPTHRESHOLD=99
DAMP_FAST_REBOUNDTHRESHOLD=99
PARITY=0

[GRAPHICS_OFFSETS]
WHEEL_LF=0.000
SUSP_LF=0.000
WHEEL_RF=-0.000
SUSP_RF=-0.000
WHEEL_LR=0.000
SUSP_LR=0.000
WHEEL_RR=-0.000
SUSP_RR=-0.000

[DAMAGE]
MIN_VELOCITY=40
GAIN=0.0004
MAX_DAMAGE=0.05
DEBUG_LOG=1